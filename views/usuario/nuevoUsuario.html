<!DOCTYPE html>
<div class="col-lg-12" style="margin-top: 95px;">
    <div id="agregarUsuario">
        <!-- FORMULARIO AGREGAR NUEVO USUARIO-->
        <form name="registrarUsuario" class="form-horizontal" novalidate>
            <fieldset>
                <!-- TITULO FORMULARIO-->
                <legend style="font-size: xx-large; text-align: center;">Registrar nuevo Usuario</legend>
                <!------------------------------------------------------------------------------------------>
                <div class="col-lg-6">
                    <!-- INPUT NOMBRE-->
                    <div class="form-group"
                         data-ng-class="
                                  {'has-error has-feedback': registrarUsuario.nombre.$invalid && !registrarUsuario.$pristine && registrarUsuario.nombre.$dirty,
                             'has-success has-feedback': registrarUsuario.nombre.$valid,
                         'has-warning has-feedback': registrarUsuario.nombre.$invalid&& registrarUsuario.nombre.$touched}">
                        <!-- LABEL INPUT NOMBRE-->
                        <label class="control-label">Nombre</label>
                        <!-- INPUT NOMBRE-->                        
                        <input type="text"
                               class="form-control"
                               ng-minlength="4"
                               ng-maxlength="20"
                               maxlength="25"
                               ng-model="user.nombre"
                               name="nombre" required placeholder="Nombre"/>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442;"
                             ng-messages="registrarUsuario.nombre.$error"
                             ng-if='registrarUsuario.nombre.$dirty || registrarUsuario.nombre.$touched'>
                            <div ng-message="minlength">Nombre demasiado corto.</div>
                            <div ng-message="maxlength">Nombre demasiado largo.</div>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>
                        </div>
                        <!-- ICONOS DE MENSAJE-->
                        <span ng-show="registrarUsuario.nombre.$dirty && registrarUsuario.nombre.$valid" class="glyphicon glyphicon-ok form-control-feedback" ></span>
                        <span ng-show="registrarUsuario.nombre.$dirty && registrarUsuario.nombre.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.nombre.$touched && registrarUsuario.nombre.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>

                    </div><!-- FIN INPUT NOMBRE-->
                    <!-- ------------------------------------------------------------------------------------ -->
                    <!-- INPUT APELLIDO-->
                    <div class="form-group" 
                         data-ng-class="{'has-error has-feedback': registrarUsuario.apellido.$invalid && !registrarUsuario.$pristine && registrarUsuario.apellido.$dirty,
                                 'has-warning has-feedback':registrarUsuario.apellido.$invalid && registrarUsuario.apellido.$touched,
                                     'has-success has-feedback': registrarUsuario.apellido.$valid}">
                        <!-- LABEL APELLIDO-->
                        <label class="control-label">Apellido</label>
                        <!-- INPUT APELLIDO-->
                        <input type="text" 
                               class="form-control"
                               ng-minlength="4" 
                               ng-maxlength="20"
                               maxlength="25"
                               placeholder="Apellido"
                               ng-model="user.apellido" name="apellido" required/>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.apellido.$error"
                             ng-if='registrarUsuario.apellido.$dirty || registrarUsuario.apellido.$touched'>
                            <div ng-message="minlength">Apellido demasiado corto.</div>
                            <div ng-message="maxlength">Apellido demasiado largo.</div>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>
                        </div>
                        <!-- ICONOS DE MENSAJE-->
                        <span ng-show="registrarUsuario.apellido.$dirty && registrarUsuario.apellido.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                        <span ng-show="registrarUsuario.apellido.$dirty && registrarUsuario.apellido.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.apellido.$touched && registrarUsuario.apellido.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                    </div><!--FIN INPUT APELLIDO-->
                    <!-- ------------------------------------------------------------------------------------ -->
                    <!-- INPUT DNI-->
                    <div class="form-group"
                         data-ng-class="{'has-error has-feedback': registrarUsuario.dni.$invalid && !registrarUsuario.$pristine && registrarUsuario.dni.$dirty,
                     'has-warning has-feedback': registrarUsuario.dni.$invalid && registrarUsuario.dni.$touched,
                 'has-success has-feedback': registrarUsuario.dni.$valid}">
                        <!-- LABEL DNI-->
                        <label class="control-label">D.N.I.</label>
                        <!-- INPUT DNI-->
                        <input type="text"
                               class="form-control"                                       
                               ui-mask="99.999.999" 
                               ui-mask-placeholder
                               ui-mask-placeholder-char="_"
                               placeholder="Documento"
                               ng-model="user.dni" name="dni" required/>
                        <!-- MENSAJES -->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.dni.$error"
                             ng-if='registrarUsuario.dni.$dirty || registrarUsuario.dni.$touched'>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>                            
                        </div>
                        <!--ICONOS DE MENSAJE -->
                        <span ng-show="registrarUsuario.dni.$dirty && registrarUsuario.dni.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                        <span ng-show="registrarUsuario.dni.$dirty && registrarUsuario.dni.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.dni.$touched && registrarUsuario.dni.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                    </div><!-- FIN DNI-->
                    <!------------------------------------------------------------------------------------------>
                    <!--INPUT DOMICILIO -->
                    <div class="form-group"
                         data-ng-class="{'has-error has-feedback': registrarUsuario.domicilio.$invalid && !registrarUsuario.$pristine && registrarUsuario.domicilio.$dirty,
                     'has-warning has-feedback': registrarUsuario.domicilio.$invalid && registrarUsuario.domicilio.$touched,
                 'has-success has-feedback': registrarUsuario.domicilio.$valid}">
                        <!-- LABEL DOMICILIO-->
                        <label class="control-label">Domicilio</label>
                        <!-- INPUT DOMICILIO-->
                        <input type="text" 
                               class="form-control"
                               ng-minlength="8" 
                               ng-maxlength="25"
                               maxlength="30"
                               placeholder="Domicilio"
                               ng-model="user.domicilio" name="domicilio" required/>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.domicilio.$error"
                             ng-if='registrarUsuario.domicilio.$dirty || registrarUsuario.domicilio.$touched'>
                            <div ng-message="minlength">Dirección de domicilio demasiado corta.</div>
                            <div ng-message="maxlength">Dirección de domicilio demasiado larga.</div>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>                            
                        </div>
                        <!--ICONOS DE MENSAJE -->
                        <span ng-show="registrarUsuario.domicilio.$dirty && registrarUsuario.domicilio.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                        <span ng-show="registrarUsuario.domicilio.$dirty && registrarUsuario.domicilio.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.domicilio.$touched && registrarUsuario.domicilio.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                    </div><!-- FIN INPUT DOMICILIO-->
                    <!------------------------------------------------------------------------------------------>
                    <!-- INPUT FECHA-->
                    <div class="form-group"
                         data-ng-class="{'has-error has-feedback': registrarUsuario.nacimiento.$invalid && !registrarUsuario.$pristine && registrarUsuario.nacimiento.$dirty,
                     'has-warning has-feedback': registrarUsuario.nacimiento.$invalid && registrarUsuario.nacimiento.$touched,
                 'has-success has-feedback': registrarUsuario.nacimiento.$valid}">
                        <!-- LABEL FECHA-->
                        <label class="control-label">Fecha nacimiento</label>
                        <!-- INPUT FECHA-->
                        <p class="input-group">
                            <input type="text" class="form-control"
                                   uib-datepicker-popup ng-model="user.fechaNacimiento"
                                   is-open="popup2.opened" 
                                   ng-maxlength="10"
                                   maxlength="10"
                                   ng-pattern="/^([0-9]{4})+([-]{1})+([0-9]{2})+([-]{1})+([0-9]{2})$/"
                                   placeholder="Fecha de nacimiento"
                                   datepicker-options="dateOptions"
                                   ng-required="true"
                                   name="nacimiento"
                                   current-text="Hoy" clear-text="Limpiar" close-text="Cerrar"/>
                            <span class="input-group-btn">
                                <button type="button"
                                        class="btn btn-warning"
                                        ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.nacimiento.$error"
                             ng-if='registrarUsuario.nacimiento.$dirty || registrarUsuario.nacimiento.$touched'>
                            <div ng-message="date">Fecha de nacimiento invalida.</div>                            
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>                            
                        </div>
                        <!--ICONOS DE MENSAJE -->
                        <span ng-show="registrarUsuario.nacimiento.$dirty && registrarUsuario.nacimiento.$valid" class="glyphicon glyphicon-ok form-control-feedback" style="padding-right:  65px;"></span>
                        <span ng-show="registrarUsuario.nacimiento.$dirty && registrarUsuario.nacimiento.$invalid" class="glyphicon glyphicon-remove  form-control-feedback" style="padding-right: 65px;"></span>
                        <span ng-show="registrarUsuario.nacimiento.$touched && registrarUsuario.nacimiento.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback" style="padding-right: 65px;"></span>
                    </div><!-- FIN INPUT FECHA-->
                    <!------------------------------------------------------------------------------------------>
                </div>
                <div class="col-lg-6">
                    <!--INPUT TELEFONO -->
                    <div class="form-group"
                         data-ng-class="{'has-error has-feedback': registrarUsuario.telefono.$invalid && !registrarUsuario.$pristine && registrarUsuario.telefono.$dirty,
                     'has-warning has-feedback': registrarUsuario.telefono.$invalid && registrarUsuario.telefono.$touched,
                 'has-success has-feedback': registrarUsuario.telefono.$valid}">
                        <!-- LABEL TELEFONO-->
                        <label class="control-label">Telefono</label>
                        <input type="tel"
                               class="form-control"
                               placeholder="Telefono"
                               ui-mask="(999) 999-9999" 
                               ui-mask-placeholder ui-mask-placeholder-char="_"
                               ng-model="user.telefono" name="telefono" required/>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.telefono.$error"
                             ng-if='registrarUsuario.telefono.$dirty || registrarUsuario.telefono.$touched'>
                            <div ng-message="tel">Número de telefono invalido.</div>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>                            
                        </div>
                        <!--ICONOS DE MENSAJE -->
                        <span ng-show="registrarUsuario.telefono.$dirty && registrarUsuario.telefono.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                        <span ng-show="registrarUsuario.telefono.$dirty && registrarUsuario.telefono.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.telefono.$touched && registrarUsuario.telefono.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                    </div><!-- FIN INPUT TELEFONO-->
                    <!------------------------------------------------------------------------------------------>
                    <!-- INPUT EMAIL-->
                    <div class="form-group" 
                         data-ng-class="{'has-error has-feedback': registrarUsuario.email.$invalid && !registrarUsuario.$pristine && registrarUsuario.email.$dirty,
                     'has-warning has-feedback': registrarUsuario.email.$invalid && registrarUsuario.email.$touched,
                 'has-success has-feedback': registrarUsuario.email.$valid}">
                        <!-- LABEL EMAIL-->
                        <label class="control-label">E-mail</label>
                        <!-- INPUT EMAIL-->
                        <input type="email" 
                               class="form-control"
                               ng-minlength="8" 
                               ng-maxlength="35"
                               maxlength="40"
                               placeholder="E-mail"
                               ng-model="user.email" name="email" required/>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.email.$error"
                             ng-if='registrarUsuario.email.$dirty || registrarUsuario.email.$touched'>
                            <div ng-message="email">Dirección de e-mail invalida.</div>
                            <div ng-message="minlength">Dirección de e-mail demasiado corta.</div>
                            <div ng-message="maxlength">Dirección de e-mail demasiado larga.</div>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>                            
                        </div>
                        <!--ICONOS DE MENSAJE -->
                        <span ng-show="registrarUsuario.email.$dirty && registrarUsuario.email.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                        <span ng-show="registrarUsuario.email.$dirty && registrarUsuario.email.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.email.$touched && registrarUsuario.email.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                    </div><!-- FIN INPUT EMAIL-->
                    <!------------------------------------------------------------------------------------------>
                    <div class="row">
                        <div class="col-lg-6">
                            <!--INPUT USERNAME -->
                            <div class="form-group" 
                                 data-ng-class="{'has-error has-feedback': registrarUsuario.username.$invalid && !registrarUsuario.$pristine && registrarUsuario.username.$dirty,
                         'has-warning has-feedback': registrarUsuario.username.$invalid && registrarUsuario.username.$touched,
                     'has-success has-feedback': registrarUsuario.username.$valid}">
                                <!-- LABEL USERNAME-->
                                <label class="control-label">Nombre de usuario</label>
                                <!-- INPUT USERNAME -->
                                <input type="text"
                                       class="form-control"
                                       ng-minlength="4" 
                                       ng-maxlength="15"
                                       maxlength="20"
                                       placeholder="Nombre de usuario"
                                       ng-model="user.username" name="username" required/>
                                <!-- MENSAJES-->
                                <div class="pull-left"
                                     style="color: #a94442; margin-top: 1%;"
                                     ng-messages="registrarUsuario.username.$error"
                                     ng-if='registrarUsuario.username.$dirty || registrarUsuario.username.$touched'>
                                    <div ng-message="minlength">Nombre de usuario demasiado corto.</div>
                                    <div ng-message="maxlength">Nombre de usuario demasiado largo.</div>
                                    <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>
                                </div>
                                <!-- ICONOS DE MENSAJE-->
                                <span ng-show="registrarUsuario.username.$dirty && registrarUsuario.username.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                                <span ng-show="registrarUsuario.username.$dirty && registrarUsuario.username.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                                <span ng-show="registrarUsuario.username.$touched && registrarUsuario.username.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                            </div><!-- FIN INPUT USERNAME-->
                            <!-- ------------------------------------------------------------------------------------ -->
                        </div>
                        <div class="col-lg-6">
                            <!-- INPUT CONTRASEÑA-->
                            <div class="form-group"
                                 data-ng-class="{'has-error has-feedback': registrarUsuario.password.$invalid && !registrarUsuario.$pristine && registrarUsuario.password.$dirty,
                     'has-warning has-feedback': registrarUsuario.password.$invalid && registrarUsuario.password.$touched,
                 'has-success has-feedback': registrarUsuario.password.$valid}">
                                <!--LABEL CONTRASEÑA -->
                                <label class="control-label">Contraseña</label>
                                <!-- INPUT CONTRASEÑA-->
                                <input type="password" 
                                       class="form-control"
                                       ng-minlength="8" 
                                       ng-maxlength="25"
                                       maxlength="25"
                                       ng-pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$"
                                       pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$"
                                       placeholder="Contraseña"
                                       ng-model="user.password" name="password" required/>
                                <!-- MENSAJES-->
                                <div class="pull-left" 
                                     style="color: #a94442; margin-top: 1%;"
                                     ng-messages="registrarUsuario.password.$error"
                                     ng-if='registrarUsuario.password.$dirty || registrarUsuario.password.$touched'>
                                    <div ng-message="minlength">Contraseña ingresada demasiado corta.</div>
                                    <div ng-message="pattern">La contraseña debe contener al menos una mayuscula, una minuscula y un número.</div>
                                    <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>
                                </div>
                                <!--ICONOS DE MENSAJE -->
                                <span ng-show="registrarUsuario.password.$dirty && registrarUsuario.password.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                                <span ng-show="registrarUsuario.password.$dirty && registrarUsuario.password.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                                <span ng-show="registrarUsuario.password.$touched && registrarUsuario.password.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                            </div><!-- FIN INPUT CONTRASEÑA-->
                            <!------------------------------------------------------------------------------------------>
                        </div>
                    </div>
                    <!-- SELECT ROLES-->
                    <div class="form-group" data-ng-init="listaRoles()"
                         data-ng-class="{'has-error has-feedback': registrarUsuario.rol.$invalid && !registrarUsuario.$pristine && registrarUsuario.rol.$dirty,
                     'has-warning has-feedback': registrarUsuario.rol.$invalid && registrarUsuario.rol.$touched,
                 'has-success has-feedback': registrarUsuario.rol.$valid}">
                        <!--LABEL ROL -->
                        <label class="control-label">Rol</label>
                        <!-- SELECT ROLES-->
                        <select name="rol"
                                class="form-control"
                                ng-options="rol as rol.nombreRol for rol in roles track by rol.idRol"
                                ng-model="user.roles" required>
                            <option value="" disabled selected>Seleccione un rol</option>
                        </select>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.rol.$error"
                             ng-if='registrarUsuario.rol.$dirty || registrarUsuario.rol.$touched'>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>
                        </div>
                        <!--ICONOS DE MENSAJE -->
                        <span ng-show="registrarUsuario.rol.$dirty && registrarUsuario.rol.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                        <span ng-show="registrarUsuario.rol.$dirty && registrarUsuario.rol.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.rol.$touched && registrarUsuario.rol.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                    </div><!-- FIN SELECT ROLES-->
                    <!------------------------------------------------------------------------------------------>
                    <!-- SELECT ROLES-->
                    <div class="form-group" data-ng-init="listaSucursales()"
                         data-ng-class="{'has-error has-feedback': registrarUsuario.sucursal.$invalid && !registrarUsuario.$pristine && registrarUsuario.sucursal.$dirty,
                     'has-warning has-feedback': registrarUsuario.sucursal.$invalid && registrarUsuario.sucursal.$touched,
                 'has-success has-feedback': registrarUsuario.sucursal.$valid}">
                        <!--LABEL ROL -->
                        <label class="control-label">Sucursal</label>
                        <!-- SELECT ROLES-->
                        <select name="sucursal"
                                class="form-control"
                                ng-options="sucursal as sucursal.nombreSucursal for sucursal in sucursales track by sucursal.idSucursal"
                                ng-model="user.usuarioSucursal" required>
                            <option value="" disabled selected>Seleccione una sucursal</option>
                        </select>
                        <!-- MENSAJES-->
                        <div class="pull-left" 
                             style="color: #a94442; margin-top: 1%;"
                             ng-messages="registrarUsuario.sucursal.$error"
                             ng-if='registrarUsuario.sucursal.$dirty || registrarUsuario.sucursal.$touched'>
                            <div ng-message="required" style="color: #8a6d3b;">Este campo no puede estar vacio.</div>
                        </div>
                        <!--ICONOS DE MENSAJE -->
                        <span ng-show="registrarUsuario.sucursal.$dirty && registrarUsuario.sucursal.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                        <span ng-show="registrarUsuario.sucursal.$dirty && registrarUsuario.sucursal.$invalid" class="glyphicon glyphicon-remove  form-control-feedback"></span>
                        <span ng-show="registrarUsuario.sucursal.$touched && registrarUsuario.sucursal.$pristine" class="glyphicon glyphicon-warning-sign  form-control-feedback"></span>
                    </div><!-- FIN SELECT ROLES-->
                </div>
                <!-- BOTON AGREGAR USUARIO-->
                <button class="btn btn-success"
                        type="submit" style="float: right; margin-right: 35px; margin-bottom: 15px; margin-top: -5px;"
                        ng-click="nuevoUsuario(user)"
                        ng-disabled="registrarUsuario.$invalid">Registrarse</button>
                <!-- FIN BOTON AGREGAR USUARIO-->
            </fieldset>            
        </form>
    </div>
</div>
<toaster-container toaster-options="{'time-out': 3000, 'close-button':true, 'animation-class': 'toast-top-center'}"></toaster-container>
